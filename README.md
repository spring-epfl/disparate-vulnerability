# Disparate vulnerability experiments

We use Python 3, scikit and keras for training models, and Jupyter notebooks for running experiments
and plotting.

## Setup

To install the required packages:
```
pip install -r requirements.txt
```

## File structure

Libraries:
* `mia/vuln.py` --- library for estimating vulnerability
* `experiments.py` --- functions that perform the experiments
* `adult.py` --- data preprocessing for the ADULT dataset
* `compas.py` --- data preprocessing for the COMPAS dataset
* `utkface.py` --- data preprocessing for the UTKFace dataset
* `fixes.py` --- definitions and parameters for all ML models we use
* `helpers.py` --- various utilities
* `plot_utils.py` --- utilities for plotting
* `plot_params.py` --- common parameters that define plot looks

Notebooks:
* `adult.ipynb` --- all experiments for the ADULT dataset
* `compas.ipynb` --- normal, effect of overfitting, and effect of fairness experiments on the COMPAS
  dataset
* `compas_dp.ipynb` --- DP experiments on the COMPAS dataset
* `utkface.ipynb` --- normal, and effect of overfitting experiments on the UTKFace dataset
* `utkface_data_volume.ipynb` --- learnability experiments on the UTKFace dataset

Empty folder placeholders that are used for persisting experiment and plotting results:
* `images`
* `models`
* `results`

## Datasets

ADULT and COMPAS datasets are checked in to the `data` folder. UTKFace has to be downloaded and
unpacked into `data/UTKFace` folder.

## Reproducing the experiments

To use the notebooks, run:
```
jupyter notebook .
```

In their current state, notebooks expect to read pickles containing experimental results, and then
do plotting using the pickles. We do not include the pickles, as they are too big. To reproduce the
experiments, one needs to manually uncomment the notebook cells that run the experiments and
save the pickles. These cells are clearly marked in the notebooks. Experiment time varies from
dataset to dataset; COMPAS should be pretty fast on any modern computer without a GPU; COMPAS
experiments should be pretty fast on any modern computer without a GPU.
