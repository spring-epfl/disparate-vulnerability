# Disparate Vulnerability to Membership Inference Attacks
This is accompanying code to the paper "[Disparate Vulnerability to Membership Inference
Attacks](https://arxiv.org/abs/1906.00389)" which appears in [PETS 2022](https://petsymposium.org/).

The code enables to reproduce all the experiments with corresponding plots and tables in the paper.

## Setup

### Manual
**System Requirements.** You need Python 3.8 and [poetry](https://python-poetry.org/). To reproduce the
plots exactly, you also need a LaTeX distribution with certain packages. On a Debian-based system,
these can be installed as follows:
```
sudo apt install texlive-latex-extra cm-super texlive-science dvipng
```

**Environment.** Use poetry to install the required packages:
```
poetry install
```

**Data.** We use ADULT and TEXAS-50K datasets. Use the following command to install the TEXAS-50K data:
```
make data
```

**Notebooks sync.** We use jupytext to automatically convert Python files to notebooks. To generate
the notebooks initially:
```
make sync
```

### Docker
Alternatively, we provide a docker image that can be used as:
```
docker build -t dv .
docker run -it --rm <any command mentioned in this document>
```

### Testing the Setup
To test that the setup works as expected, you can use:
```
make tests
```

This runs the same scripts that are used for the paper experiments but with fewer models (3 vs 200
models needed for the full reproduction). The tests can take several minutes to run. The tests are
successful if no error was returned.

## Modules and Scripts
The repo contains the following modules and directories:




## Reproducing the Paper Results

To use the notebooks in the interactive mode, run:
```
jupyter notebook .
```

And run each notebook in the root folder. This will re-run the experiments and might take from 20
minutes to about 6 hours depending on the script.
